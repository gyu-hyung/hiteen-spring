spring:
  jackson:
    time-zone: Asia/Seoul
  profiles:
    active: loc
  application:
    name: hiteen

  r2dbc:
#    url: r2dbc:postgresql://127.0.0.1:5432/hiteen
    url: r2dbc:postgresql://49.247.175.76:5432/hiteen
    username: hiteen
#    password: 1234
    password: xxxxxxxx
    pool:
      enabled: true
      initial-size: 2         # 서버 시작 시 커넥션 미리 확보
      max-size: 10            # 500 VU 기준 SAFE
      max-idle-time: 60s
      max-life-time: 30m
      validation-query: "SELECT 1"
      acquire-timeout: 10s     # 대기 시간 제한 → 지연 대기 줄임
      max-create-connection-time: 10s

  liquibase:
#    url: jdbc:postgresql://127.0.0.1:5432/hiteen
    url: jdbc:postgresql://49.247.175.76:5432/hiteen
    user: hiteen
#    password: 1234
    password: xxxxxxxx
    change-log: classpath:db/changelog/db.changelog-master.yaml

  data:
    mongodb:
#      uri: mongodb://hiteen:1234@127.0.0.1:27017/hiteen?authSource=admin
      uri: mongodb://hiteen:hiteen%402025@49.247.170.182:27017/hiteen?authSource=admin
    redis:
      repositories:
        enabled: false
      host: 127.0.0.1
      port: 6379
      password: xxxxxxxx
#      password:
      timeout: 5s
      client-type: lettuce

      lettuce:
        pool:
          max-active: 16
          max-idle: 8
          min-idle: 2
          time-between-eviction-runs: 60s
  devtools:
    livereload:
      enabled: true
    restart:
      enabled: false
  config:
    import:
      - "classpath:mbti.yml"
      - "classpath:exp.yml"


management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  metrics:
    tags:
      application: hiteen   # 앱 이름(식별용)

server:
  port: 8080

app:
  asset:
    storage-root: ${HOME}/assets
#    storage-root: D:/Project/Hiteen2/assets
    static-locations: classpath:/assets/
    allowed-exts: jpg,jpeg,png,gif,webp,bmp,svg,mp4,mov,avi,mkv,pdf,txt,csv,zip,rar,gz
    max-size-bytes: 5242880 # 50MB
  join:
    rejoin-days: 30
    dev-allow-always: false
  deeplink:
    invite:
      # 앱 설치되어 있으면 이동할 딥링크(커스텀 스킴 또는 유니버설링크)
      app-scheme: "hiteen://invite"
      # 미설치 시 스토어 폴백
      android-store: "https://play.google.com/store/apps/details?id=kr.jiasoft.hiteen"
      ios-store: "https://apps.apple.com/app/id0000000000"

admob:
  key-url: https://www.gstatic.com/admob/reward/verifier-keys.json

jwt:
  secret: ac0da6c32199d5d4829ca62b05f2a353ab926e2855de718e28286ca64bc2f9df
  access-expiration: 864000000
  #  2주
  #  refresh-expiration: 1209600000
  #  1년
  refresh-expiration: 31536000000

springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui

soketi:
  host: 127.0.0.1
  port: 6001
  app-id: hiteen-app
  app-key: hiteen-key
  app-secret: hiteen-secret

sms:
  callback: "1577-5993"
  api-key: 0rsw46blu616mp6geidaldsy9z6o0pgi
  api-url: https://apis.aligo.in/send/
  user-id: jiasoft
  kakao:
    sender-key: KAKAO_SENDER_KEY
    token-url: https://kakaoapi.aligo.in/akv10/token/create/30/s/
    alimtalk-url: https://kakaoapi.aligo.in/akv10/alimtalk/send/
    detail-url: https://kakaoapi.aligo.in/akv10/history/detail/

batch:
  enabled: true

giftishow:
  url: "https://bizapi.giftishow.com/bizApi"
  auth-key: "REAL626e92ac568f4330947dd8793622e9ac"
  token-key: "0F3WhVAAAx6iuIFzIcF7Gg=="
  template-id: "202404120253800"
  banner-id: "202404120290767"
  callback: "15775993"
  user-id: "ceo@jiasoft.kr"
  admin-phone: "01026490217|01066227103|01099136543"

neis:
  base-url: "https://open.neis.go.kr/hub"
  api-key: "458d6485b25c46009758a4ab53413497"

kakao:
  base-url: "https://dapi.kakao.com/v2/local"
  api-key: "6ba92dcdddc5dccc78dbbaa50eb95825"

#mqtt:
#  broker:
#    uri: tcp://192.168.49.2:30002
#  topic: $share/group1/location/#
#  client:
#    id: tbmq_spring
#  username: tbmq_spring
#  password: tbmq_spring
#  cleanStart: false
#  automaticReconnect: true
#  sessionExpiryInterval: 604800
#  keepAliveInterval: 60
#  qos: 1

# 미사용
tbmq:
  url: http://192.168.49.2:30001
  admin:
    username: sysadmin@thingsboard.org
    password: sysadmin
  mqtt:
    host: 192.168.49.2
    port: 30002
    tls: false

logging:
  level:
    io.r2dbc.postgresql.QUERY: INFO
    io.r2dbc.postgresql.PARAM: DEBUG

    org.springframework.r2dbc.core: DEBUG

    org.mongodb.driver: INFO
    org.mongodb.driver.connection: WARN
    org.mongodb.driver.protocol.command: INFO
    org.mongodb.driver.protocol.query: INFO
    org.mongodb.driver.cluster: WARN

    org.springframework.security: INFO
    org.springframework.cache: INFO
