# ============================================
# Global Settings - Production
# ============================================
namespace: hiteen

# nodeSelector 비활성화 (단일 노드 운영)
# nodeSelector:
#   node-type: private

# ============================================
# NFS (Assets Storage) - 개발서버와 동일
# ============================================
nfs:
  enabled: true
  server: "10.8.0.159"  # 개발서버와 동일한 NFS 서버
  path: "/srv/nfs/assets"
  storage: "100Gi"
  pvcName: nfs-pvc-images

# ============================================
# NFS (Backup Storage)
# ============================================
backupNfs:
  enabled: true
  server: "10.8.0.159"
  path: "/srv/nfs/backup"
  storage: "100Gi"

# ============================================
# Redis Cluster - Production
# ============================================
redis:
  enabled: true
  replicas: 6
  clusterReplicas: 1
  password: ""  # Secret으로 관리, helm install 시 --set으로 주입

  image:
    repository: redis
    tag: "8.2.4"
    pullPolicy: IfNotPresent

  service:
    name: redis
    port: 6379
    clusterPort: 16379

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 300m
      memory: 256Mi

  storageClass: local-path
  storageSize: 5Gi
  accessModes:
    - ReadWriteOnce

  clusterInit:
    enabled: true
    waitTimeout: 120
    pingInterval: 3

# ============================================
# Database Backup CronJob
# ============================================
dbBackup:
  enabled: true
  schedule: "0 6 * * *"  # 매일 새벽 3시
  postgres:
    host: "10.8.0.200"  # 운영 DB 서버 IP
    database: "hiteen"
    user: "hiteen"
    password: ""  # helm install 시 --set dbBackup.postgres.password=xxx
  retention:
    days: 30  # 백업 보관 일수

# ============================================
# Asset Backup CronJob
# ============================================
# tar -czf ${BACKUP_FILE} -C /assets .
# tar -xzf assets-20260219-060000.tar.gz -C /복원경로
assetBackup:
  enabled: true
  schedule: "0 6 * * *"  # 매일 새벽 6시 (DB 백업 후)
  retention:
    days: 30  # Asset 백업은 용량이 크므로 14일만 보관
