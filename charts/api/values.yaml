# -------------------------------------------------------------------
# üîπ Î∞∞Ìè¨ ÏÑ§Ï†ï
# -------------------------------------------------------------------
replicaCount: 2

image:
  repository: ghcr.io/gyu-hyung/hiteen-api
  tag: latest
  pullPolicy: IfNotPresent

# -------------------------------------------------------------------
# üîπ ÏÑúÎπÑÏä§ ÏÑ§Ï†ï
# -------------------------------------------------------------------
service:
  type: ClusterIP
  port: 8080

# -------------------------------------------------------------------
# üîπ Ïù∏Í∑∏Î†àÏä§ ÏÑ§Ï†ï
# -------------------------------------------------------------------
ingress:
  enabled: true
  className: nginx
  hosts:
    - host: api.hiteen.local
      paths:
        - path: /
          pathType: Prefix
  tls: [] # Ï∂îÌõÑ cert-managerÎ°ú ÍµêÏ≤¥ Í∞ÄÎä•

# -------------------------------------------------------------------
# üîπ Î¶¨ÏÜåÏä§ ÏöîÏ≤≠ Î∞è Ï†úÌïú
# -------------------------------------------------------------------
resources:
  requests:
    cpu: 300m
    memory: 512Mi
  limits:
    cpu: 1
    memory: 1Gi

# -------------------------------------------------------------------
# üîπ ÏòÅÏÜç Î≥ºÎ•® (PVC)
# -------------------------------------------------------------------
persistence:
  enabled: true
  name: asset-storage
  mountPath: /app/assets
  storageClass: local-path
  # storageClass: standard   # minikube, local-path ÌôòÍ≤ΩÏùº Í≤ΩÏö∞ ÍµêÏ≤¥
  accessModes:
    - ReadWriteOnce
  size: 2Gi

# -------------------------------------------------------------------
# üîπ ÌôòÍ≤Ω Î≥ÄÏàò
# -------------------------------------------------------------------
env:
  PROFILE: dev

  # ---------------------------
  # Database (R2DBC + Liquibase)
  # ---------------------------
  SPRING_R2DBC_URL: "r2dbc:postgresql://10.8.3.89:5432/hiteen"
  SPRING_R2DBC_USERNAME: "hiteen"
  SPRING_R2DBC_PASSWORD: "hiteen@2025"

  SPRING_LIQUIBASE_URL: "jdbc:postgresql://10.8.3.89:5432/hiteen"
  SPRING_LIQUIBASE_USER: "hiteen"
  SPRING_LIQUIBASE_PASSWORD: "hiteen@2025"

  # ---------------------------
  # MongoDB
  # ---------------------------
  SPRING_DATA_MONGODB_URI: "mongodb://hiteen:hiteen%402025@10.8.2.156:27017/hiteen?authSource=admin"

  # ---------------------------
  # Redis Cluster
  # ---------------------------
  SPRING_DATA_REDIS_CLUSTER_NODES: "10.8.1.51:6379,10.8.0.159:6379"
  SPRING_DATA_REDIS_PASSWORD: "hiteen1234"


  # ---------------------------
  # Firebase
  FIREBASE_CREDENTIAL_PATH: "/secrets/firebase-key.json"
  # ---------------------------


  # ---------------------------
  # Soketi (WebSocket)
  # ---------------------------
  SOKETI_HOST: "soketi.hiteen-prod.svc.cluster.local"
  SOKETI_PORT: "6001"
  SOKETI_APP_ID: "hiteen-app"
  SOKETI_APP_KEY: "hiteen-key"
  SOKETI_APP_SECRET: "hiteen-secret"

  # ---------------------------
  # TBMQ (ThingsBoard MQTT)
  # ---------------------------
  TBMQ_URL: "http://192.168.49.2:30001"
  TBMQ_MQTT_HOST: "192.168.49.2"
  TBMQ_MQTT_PORT: "30002"

  # ---------------------------
  # JWT
  # ---------------------------
  JWT_SECRET: "ac0da6c32199d5d4829ca62b05f2a353ab926e2855de718e28286ca64bc2f9df"

  # ---------------------------
  # External APIs
  # ---------------------------
  NEIS_API_KEY: "458d6485b25c46009758a4ab53413497"
  KAKAO_API_KEY: "6ba92dcdddc5dccc78dbbaa50eb95825"
  ALIGO_API_KEY: "0rsw46blu616mp6geidaldsy9z6o0pgi"

  # ---------------------------
  # Swagger / SpringDoc
  # ---------------------------
  SPRINGDOC_API_DOCS_PATH: "/api-docs"
  SWAGGER_UI_PATH: "/swagger-ui"
